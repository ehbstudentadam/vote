import{aM as l,J as p,m as n,aN as g,N as i}from"./C2Q4OGa1.js";import{U as m}from"./BIbqvuFE.js";import{r as o}from"./WhGbtVHo.js";import"./BCp-4Evj.js";const c=m.abi,u="0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0";function b(t){return new Promise(a=>{let s="not-registered";o(i,{address:u,abi:c,functionName:"isUser",args:[t],account:t}).then(e=>{e&&(s="user")}).catch(e=>{console.error("Error checking isUser status:",e)}).finally(()=>{o(i,{address:u,abi:c,functionName:"isInstance",args:[t],account:t}).then(e=>{e&&(s="instance")}).catch(e=>{console.error("Error checking isInstance status:",e)}).finally(()=>{a(s)})})})}const U=l(async t=>{let a,s;const{address:e,isConnected:d}=p();if(!d.value||!e.value)return n("/portal");const r=([a,s]=g(()=>b(e.value)),a=await a,s(),a),h=["/","/register","/dashboard/instance","/polls/new"],f=["/","/register","/dashboard/voter","/polls/[pollId]/vote"];if(r==="not-registered"&&t.path!=="/register")return n("/register");if(r==="user"&&h.includes(t.path)&&t.path!=="/dashboard/voter")return n("/dashboard/voter");if(r==="instance"&&f.includes(t.path)&&t.path!=="/dashboard/instance")return n("/dashboard/instance");r==="user"&&t.path==="/dashboard/voter"||r==="instance"&&t.path});export{U as default};
