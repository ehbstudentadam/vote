import{aM as f,J as p,m as n,aN as g,N as i}from"./Dcd5bFKn.js";import{U as b}from"./BIbqvuFE.js";import{r as o}from"./UlRcRJ6H.js";import"./DRckOv8H.js";const c=b.abi,u="0x947FFf4A43074f3F83A3F127d62Bd65738b3406b";function m(t){return new Promise(s=>{let a="not-registered";o(i,{address:u,abi:c,functionName:"isUser",args:[t],account:t}).then(e=>{e&&(a="user")}).catch(e=>{console.error("Error checking isUser status:",e)}).finally(()=>{o(i,{address:u,abi:c,functionName:"isInstance",args:[t],account:t}).then(e=>{e&&(a="instance")}).catch(e=>{console.error("Error checking isInstance status:",e)}).finally(()=>{s(a)})})})}const U=f(async t=>{let s,a;const{address:e,isConnected:d}=p();if(!d.value||!e.value)return n("/portal");const r=([s,a]=g(()=>m(e.value)),s=await s,a(),s),h=["/","/register","/dashboard/instance","/polls/new"],l=["/","/register","/dashboard/voter","/polls/[pollId]/vote"];if(r==="not-registered"&&t.path!=="/register")return n("/register");if(r==="user"&&h.includes(t.path)&&t.path!=="/dashboard/voter")return n("/dashboard/voter");if(r==="instance"&&l.includes(t.path)&&t.path!=="/dashboard/instance")return n("/dashboard/instance");r==="user"&&t.path==="/dashboard/voter"||r==="instance"&&t.path});export{U as default};
