import{U as w,V as I,W as y,r as C,X as b,_ as k,K as g,J as A,o as M,E as S,v as i,Y as m,x as p,L as x,M as E,y as f,Q as B,t as d}from"./CUp-TJhH.js";import{u as F}from"./DVUokRxw.js";async function O(t,e){var o;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new w;try{t.setState(s=>({...s,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const c=await n.connect({chainId:e.chainId}),r=c.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((o=t.storage)==null?void 0:o.setItem("recentConnectorId",n.id)),t.setState(s=>({...s,connections:new Map(s.connections).set(n.uid,{accounts:r,chainId:c.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:r,chainId:c.chainId}}catch(c){throw t.setState(r=>({...r,status:r.current?"connected":"disconnected"})),c}}let v=[];function V(t){const e=t.connectors;return I(v,e)?v:(v=e,e)}function W(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((o,c)=>{n(Object.values(o),c)})}function D(t){return{mutationFn(e){return O(t,e)},mutationKey:["connect"]}}function K(t={}){const e=y(t),n=C(V(e)),o=W(e,{onChange(c){n.value=c}});return b(()=>o()),n}function L(t={}){const{mutation:e}=t,n=y(t),o=D(n),{mutate:c,mutateAsync:r,...s}=F({...e,...o}),a=n.subscribe(({status:l})=>l,(l,u)=>{u==="connected"&&l==="disconnected"&&s.reset()});return b(()=>a()),{...s,connect:c,connectAsync:r,connectors:K({config:n}).value}}const N={class:"connect-wallet"},j={key:0},q={class:"connect-buttons"},J=["onClick"],P={key:0,class:"error"},Q={key:1},R={__name:"index",setup(t){const e=g(),{address:n,isConnected:o}=A(),{connectors:c,connectAsync:r,error:s}=L(),a=C(null);M(()=>{o.value&&e.push("/")}),S(o,u=>{u&&e.push("/")});const l=async u=>{a.value=null;try{await r({connector:u})}catch{a.value=(s==null?void 0:s.message)||"Failed to connect"}};return(u,_)=>(d(),i("div",N,[m(o)?(d(),i("div",Q,[p("p",null,"Wallet connected: "+f(m(n)),1)])):(d(),i("div",j,[_[0]||(_[0]=p("h2",null,"Please connect your wallet to continue",-1)),p("div",q,[(d(!0),i(x,null,E(m(c),h=>(d(),i("button",{key:h.id,onClick:U=>l(h)}," Connect with "+f(h.name),9,J))),128))]),a.value?(d(),i("p",P,f(a.value),1)):B("",!0)]))]))}},$=k(R,[["__scopeId","data-v-fb88611e"]]);export{$ as default};
