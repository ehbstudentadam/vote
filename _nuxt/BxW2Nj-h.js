import{_ as S,r,K as _,J as z,v as a,x as t,y as C,O,z as B,A as W,Z as D,t as n,$ as P,R as w,S as y,T as k,Q as i}from"./maorzbmM.js";import{U as $}from"./BIbqvuFE.js";import{u as I}from"./DcdITdw2.js";import"./Daxjj82i.js";import"./DqVirlQw.js";const H={class:"register-page"},L={key:0,class:"form"},M={class:"form-group"},J={class:"form-group"},K={class:"form-group"},Q={key:0,class:"error"},Z={key:1,class:"success"},j={key:1,class:"form"},G={class:"form-group"},X={class:"form-group"},Y={key:0,class:"error"},ee={key:1,class:"success"},te={__name:"index",setup(se){const o=r(null),u=r(""),b=r(""),d=r(""),v=r(""),c=r(""),g=r(null),R=r(!1),p=r(null),m=r(!1),E="0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0",N=$.abi,x=_(),{address:f,isConnected:A}=z(),{writeContractAsync:h}=I({address:E,abi:N,functionName:"registerInstance"}),{writeContractAsync:q}=I({address:E,abi:N,functionName:"registerUser"});async function T(){try{if(g.value=null,m.value=!1,!A.value)throw new Error("Wallet is not connected.");if(!f.value)throw new Error("Wallet address is missing.");if(!u.value.trim())throw new Error("Name is required.");if(!d.value.trim())throw new Error("Email is required.");const s=parseInt(b.value,10);if(isNaN(s)||s<=0)throw new Error("Valid age is required.");console.log("Arguments:",{user:f.value,name:u.value.trim(),age:s,email:d.value.trim()});const e=await q({address:E,abi:N,functionName:"registerUser",args:[f.value,u.value.trim(),s,d.value.trim()],gasLimit:3e6});console.log("Transaction:",e),console.log("Transaction Hash:",e.hash),m.value=!0,x.push("/")}catch(s){g.value=s.message||"Failed to register user",console.error("Error in handleUserRegistration:",s)}}async function F(){try{if(p.value=null,m.value=!1,!A.value)throw new Error("Wallet is not connected.");if(!f.value||!v.value||!c.value)throw new Error("All fields must be filled out correctly.");console.log("Address:",f.value),console.log("Organization Name:",v.value),console.log("Contact Email:",c.value);const s=await h({address:E,abi:N,functionName:"registerInstance",args:[f.value,v.value,c.value],gasLimit:3e6});console.log("Transaction:",s),console.log("Transaction Hash:",s.hash),m.value=!0,x.push("/")}catch(s){p.value=s.message||"Failed to register instance",console.error(s)}}function U(s){o.value===s?(o.value=null,V()):(o.value=s,V())}function V(){u.value="",b.value="",d.value="",v.value="",c.value="",g.value=null,R.value=!1,p.value=null,m.value=!1}return(s,e)=>(n(),a("div",H,[t("div",{class:O(["options-container",{"slide-right":o.value==="vote","slide-left":o.value==="poll"}])},[t("div",{class:"option vote",onClick:e[0]||(e[0]=l=>U("vote"))},[t("h2",null,C(o.value==="vote"?"Register to Vote":"I want to vote"),1)]),t("div",{class:"option poll",onClick:e[1]||(e[1]=l=>U("poll"))},[t("h2",null,C(o.value==="poll"?"Register to Create a Poll":"I want to create a Poll"),1)])],2),B(D,{name:"fade"},{default:W(()=>[o.value?(n(),a("div",{key:0,class:"form-container",style:P({left:o.value==="poll"?"50%":"0"})},[o.value==="vote"?(n(),a("div",L,[e[11]||(e[11]=t("h2",null,"Register to Vote",-1)),t("form",{onSubmit:k(T,["prevent"])},[t("div",M,[e[7]||(e[7]=t("label",{for:"username"},"Name:",-1)),w(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>u.value=l),type:"text",id:"username",required:""},null,512),[[y,u.value]])]),t("div",J,[e[8]||(e[8]=t("label",{for:"age"},"Age:",-1)),w(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>b.value=l),type:"number",id:"age",required:""},null,512),[[y,b.value]])]),t("div",K,[e[9]||(e[9]=t("label",{for:"email"},"Email:",-1)),w(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>d.value=l),type:"email",id:"email",required:""},null,512),[[y,d.value]])]),e[10]||(e[10]=t("button",{type:"submit"},"Register",-1))],32),g.value?(n(),a("p",Q,C(g.value),1)):i("",!0),R.value?(n(),a("p",Z,"Voter registration successful!")):i("",!0)])):i("",!0),o.value==="poll"?(n(),a("div",j,[e[15]||(e[15]=t("h2",null,"Register to Create a Poll",-1)),t("form",{onSubmit:k(F,["prevent"])},[t("div",G,[e[12]||(e[12]=t("label",{for:"orgname"},"Organization Name:",-1)),w(t("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>v.value=l),type:"text",id:"orgname",required:""},null,512),[[y,v.value]])]),t("div",X,[e[13]||(e[13]=t("label",{for:"contact"},"Email:",-1)),w(t("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>c.value=l),type:"email",id:"contact",required:""},null,512),[[y,c.value]])]),e[14]||(e[14]=t("button",{type:"submit"},"Register",-1))],32),p.value?(n(),a("p",Y,C(p.value),1)):i("",!0),m.value?(n(),a("p",ee,"Instance registration successful!")):i("",!0)])):i("",!0)],4)):i("",!0)]),_:1})]))}},ie=S(te,[["__scopeId","data-v-b8eb9c0c"]]);export{ie as default};
