import{_ as a0,r as f,P as b0,J as f0,o as t0,v as s,x as b,y as i,L as n0,M as d0,Q as s0,N as o,t as c}from"./CUp-TJhH.js";import{P as i0}from"./ClhTlj9r.js";import{S as o0}from"./DvOOLRGX.js";import{u as q,w as c0}from"./DYfkLRrb.js";import{r}from"./BRfHbl6E.js";import"./DVUokRxw.js";import"./CvP2IWBu.js";const r0="hh-sol-artifact-1",l0="TokenDistribution",u0="contracts/TokenDistribution.sol",p0=[{inputs:[{internalType:"address",name:"_accessControlManager",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ERC1155InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC1155InvalidApprover",type:"error"},{inputs:[{internalType:"uint256",name:"idsLength",type:"uint256"},{internalType:"uint256",name:"valuesLength",type:"uint256"}],name:"ERC1155InvalidArrayLength",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"ERC1155InvalidOperator",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC1155InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC1155InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"ERC1155MissingApprovalForAll",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"poll",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"TokensBurned",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"poll",type:"address"},{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"TokensDistributed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"poll",type:"address"},{indexed:!1,internalType:"uint256",name:"pollId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"TokensMinted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{inputs:[],name:"accessControlManager",outputs:[{internalType:"contract AccessControlManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"address",name:"poll",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"distributeTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"poll",type:"address"}],name:"getTotalSupplyForPoll",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"poll",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mintNFTsForPoll",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"pollTotalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],y0="0x608060405234801561001057600080fd5b50604051611a93380380611a9383398101604081905261002f9161007d565b6040805160208101909152600081526100478161006d565b50600380546001600160a01b0319166001600160a01b039290921691909117905561020a565b6002610079828261014c565b5050565b60006020828403121561008f57600080fd5b81516001600160a01b03811681146100a657600080fd5b9392505050565b634e487b7160e01b600052604160045260246000fd5b600181811c908216806100d757607f821691505b6020821081036100f757634e487b7160e01b600052602260045260246000fd5b50919050565b601f82111561014757806000526020600020601f840160051c810160208510156101245750805b601f840160051c820191505b818110156101445760008155600101610130565b50505b505050565b81516001600160401b03811115610165576101656100ad565b6101798161017384546100c3565b846100fd565b6020601f8211600181146101ad57600083156101955750848201515b600019600385901b1c1916600184901b178455610144565b600084815260208120601f198516915b828110156101dd57878501518255602094850194600190920191016101bd565b50848210156101fb5786840151600019600387901b60f8161c191681555b50505050600190811b01905550565b61187a806102196000396000f3fe608060405234801561001057600080fd5b50600436106100de5760003560e01c8063a22cb4651161008c578063cb07bc2411610066578063cb07bc24146101fb578063cbd20a911461020e578063e985e9c51461022e578063f242432a1461026a57600080fd5b8063a22cb46514610194578063b4a0bdf3146101a7578063b5ed82ab146101d257600080fd5b80632eb2c2d6116100bd5780632eb2c2d61461014c5780634e1273f414610161578063708625621461018157600080fd5b8062fdd58e146100e357806301ffc9a7146101095780630e89341c1461012c575b600080fd5b6100f66100f136600461118f565b61027d565b6040519081526020015b60405180910390f35b61011c6101173660046111d2565b6102a5565b6040519015158152602001610100565b61013f61013a3660046111f6565b610340565b6040516101009190611255565b61015f61015a3660046113b0565b6103d4565b005b61017461016f366004611466565b61045f565b604051610100919061156b565b61015f61018f36600461157e565b61052c565b61015f6101a23660046115c9565b6107eb565b6003546101ba906001600160a01b031681565b6040516001600160a01b039091168152602001610100565b6100f66101e0366004611600565b6001600160a01b031660009081526004602052604090205490565b6100f661020936600461118f565b6107fa565b6100f661021c366004611600565b60046020526000908152604090205481565b61011c61023c36600461161b565b6001600160a01b03918216600090815260016020908152604080832093909416825291909152205460ff1690565b61015f61027836600461164e565b610a6a565b6000818152602081815260408083206001600160a01b03861684529091529020545b92915050565b60006001600160e01b031982167fd9b67a2600000000000000000000000000000000000000000000000000000000148061030857506001600160e01b031982167f0e89341c00000000000000000000000000000000000000000000000000000000145b8061029f57507f01ffc9a7000000000000000000000000000000000000000000000000000000006001600160e01b031983161461029f565b60606002805461034f906116a7565b80601f016020809104026020016040519081016040528092919081815260200182805461037b906116a7565b80156103c85780601f1061039d576101008083540402835291602001916103c8565b820191906000526020600020905b8154815290600101906020018083116103ab57829003601f168201915b50505050509050919050565b336001600160a01b038616811480159061041457506001600160a01b0380871660009081526001602090815260408083209385168352929052205460ff16155b1561044a5760405163711bec9160e11b81526001600160a01b038083166004830152871660248201526044015b60405180910390fd5b6104578686868686610ae8565b505050505050565b606081518351146104905781518351604051635b05999160e01b815260048101929092526024820152604401610441565b6000835167ffffffffffffffff8111156104ac576104ac611268565b6040519080825280602002602001820160405280156104d5578160200160208202803683370190505b50905060005b8451811015610524576020808202860101516104ff9060208084028701015161027d565b828281518110610511576105116116e1565b60209081029190910101526001016104db565b509392505050565b600360009054906101000a90046001600160a01b03166001600160a01b031663f0bd87cc6040518163ffffffff1660e01b8152600401602060405180830381865afa15801561057f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105a391906116f7565b60035460405163827ebb3760e01b8152600481018390523360248201526001600160a01b039091169063827ebb3790604401602060405180830381865afa1580156105f2573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106169190611710565b6106625760405162461bcd60e51b815260206004820152601d60248201527f4163636573732064656e6965643a20496e636f727265637420726f6c650000006044820152606401610441565b6001600160a01b0384166106b85760405162461bcd60e51b815260206004820152601460248201527f496e76616c6964207573657220616464726573730000000000000000000000006044820152606401610441565b6001600160a01b03831661070e5760405162461bcd60e51b815260206004820152601460248201527f496e76616c696420706f6c6c20616464726573730000000000000000000000006044820152606401610441565b6000821161076d5760405162461bcd60e51b815260206004820152602660248201527f546f6b656e20616d6f756e74206d7573742062652067726561746572207468616044820152656e207a65726f60d01b6064820152608401610441565b6000836001600160a01b031690506107978486838660405180602001604052806000815250610b4f565b846001600160a01b0316846001600160a01b03167f3c814279fb91e60473ba2885e11916204b1d6e338708a2c22cca659f28a92896856040516107dc91815260200190565b60405180910390a35050505050565b6107f6338383610bdd565b5050565b600354604080517ff0bd87cc00000000000000000000000000000000000000000000000000000000815290516000926001600160a01b03169163f0bd87cc9160048083019260209291908290030181865afa15801561085d573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061088191906116f7565b60035460405163827ebb3760e01b8152600481018390523360248201526001600160a01b039091169063827ebb3790604401602060405180830381865afa1580156108d0573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108f49190611710565b6109405760405162461bcd60e51b815260206004820152601d60248201527f4163636573732064656e6965643a20496e636f727265637420726f6c650000006044820152606401610441565b6001600160a01b0384166109965760405162461bcd60e51b815260206004820152601460248201527f496e76616c696420706f6c6c20616464726573730000000000000000000000006044820152606401610441565b600083116109f55760405162461bcd60e51b815260206004820152602660248201527f546f74616c20737570706c79206d7573742062652067726561746572207468616044820152656e207a65726f60d01b6064820152608401610441565b6000846001600160a01b03169050610a1e85828660405180602001604052806000815250610c8d565b60408051828152602081018690526001600160a01b038716917f2e8ac5177a616f2aec08c3048f5021e4e9743ece034e8d83ba5caf76688bb475910160405180910390a2949350505050565b336001600160a01b0386168114801590610aaa57506001600160a01b0380871660009081526001602090815260408083209385168352929052205460ff16155b15610adb5760405163711bec9160e11b81526001600160a01b03808316600483015287166024820152604401610441565b6104578686868686610b4f565b6001600160a01b038416610b1257604051632bfa23e760e11b815260006004820152602401610441565b6001600160a01b038516610b3b57604051626a0d4560e21b815260006004820152602401610441565b610b488585858585610ce6565b5050505050565b6001600160a01b038416610b7957604051632bfa23e760e11b815260006004820152602401610441565b6001600160a01b038516610ba257604051626a0d4560e21b815260006004820152602401610441565b60408051600180825260208201869052818301908152606082018590526080820190925290610bd48787848487610ce6565b50505050505050565b6001600160a01b038216610c20576040517fced3e10000000000000000000000000000000000000000000000000000000000815260006004820152602401610441565b6001600160a01b03838116600081815260016020908152604080832094871680845294825291829020805460ff191686151590811790915591519182527f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31910160405180910390a3505050565b6001600160a01b038416610cb757604051632bfa23e760e11b815260006004820152602401610441565b604080516001808252602082018690528183019081526060820185905260808201909252906104576000878484875b610cf285858585610d39565b6001600160a01b03841615610b485782513390600103610d2b5760208481015190840151610d24838989858589610f66565b5050610457565b61045781878787878761108a565b8051825114610d685781518151604051635b05999160e01b815260048101929092526024820152604401610441565b3360005b8351811015610e87576020818102858101820151908501909101516001600160a01b03881615610e38576000828152602081815260408083206001600160a01b038c16845290915290205481811015610e11576040517f03dee4c50000000000000000000000000000000000000000000000000000000081526001600160a01b038a166004820152602481018290526044810183905260648101849052608401610441565b6000838152602081815260408083206001600160a01b038d16845290915290209082900390555b6001600160a01b03871615610e7d576000828152602081815260408083206001600160a01b038b16845290915281208054839290610e7790849061172d565b90915550505b5050600101610d6c565b508251600103610f085760208301516000906020840151909150856001600160a01b0316876001600160a01b0316846001600160a01b03167fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f628585604051610ef9929190918252602082015260400190565b60405180910390a45050610b48565b836001600160a01b0316856001600160a01b0316826001600160a01b03167f4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb8686604051610f5792919061174e565b60405180910390a45050505050565b6001600160a01b0384163b156104575760405163f23a6e6160e01b81526001600160a01b0385169063f23a6e6190610faa908990899088908890889060040161177c565b6020604051808303816000875af1925050508015610fe5575060408051601f3d908101601f19168201909252610fe2918101906117c4565b60015b61104e573d808015611013576040519150601f19603f3d011682016040523d82523d6000602084013e611018565b606091505b50805160000361104657604051632bfa23e760e11b81526001600160a01b0386166004820152602401610441565b805181602001fd5b6001600160e01b0319811663f23a6e6160e01b14610bd457604051632bfa23e760e11b81526001600160a01b0386166004820152602401610441565b6001600160a01b0384163b156104575760405163bc197c8160e01b81526001600160a01b0385169063bc197c81906110ce90899089908890889088906004016117e1565b6020604051808303816000875af1925050508015611109575060408051601f3d908101601f19168201909252611106918101906117c4565b60015b611137573d808015611013576040519150601f19603f3d011682016040523d82523d6000602084013e611018565b6001600160e01b0319811663bc197c8160e01b14610bd457604051632bfa23e760e11b81526001600160a01b0386166004820152602401610441565b80356001600160a01b038116811461118a57600080fd5b919050565b600080604083850312156111a257600080fd5b6111ab83611173565b946020939093013593505050565b6001600160e01b0319811681146111cf57600080fd5b50565b6000602082840312156111e457600080fd5b81356111ef816111b9565b9392505050565b60006020828403121561120857600080fd5b5035919050565b6000815180845260005b8181101561123557602081850181015186830182015201611219565b506000602082860101526020601f19601f83011685010191505092915050565b6020815260006111ef602083018461120f565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f1916810167ffffffffffffffff811182821017156112a7576112a7611268565b604052919050565b600067ffffffffffffffff8211156112c9576112c9611268565b5060051b60200190565b600082601f8301126112e457600080fd5b81356112f76112f2826112af565b61127e565b8082825260208201915060208360051b86010192508583111561131957600080fd5b602085015b8381101561133657803583526020928301920161131e565b5095945050505050565b600082601f83011261135157600080fd5b813567ffffffffffffffff81111561136b5761136b611268565b61137e601f8201601f191660200161127e565b81815284602083860101111561139357600080fd5b816020850160208301376000918101602001919091529392505050565b600080600080600060a086880312156113c857600080fd5b6113d186611173565b94506113df60208701611173565b9350604086013567ffffffffffffffff8111156113fb57600080fd5b611407888289016112d3565b935050606086013567ffffffffffffffff81111561142457600080fd5b611430888289016112d3565b925050608086013567ffffffffffffffff81111561144d57600080fd5b61145988828901611340565b9150509295509295909350565b6000806040838503121561147957600080fd5b823567ffffffffffffffff81111561149057600080fd5b8301601f810185136114a157600080fd5b80356114af6112f2826112af565b8082825260208201915060208360051b8501019250878311156114d157600080fd5b6020840193505b828410156114fa576114e984611173565b8252602093840193909101906114d8565b9450505050602083013567ffffffffffffffff81111561151957600080fd5b611525858286016112d3565b9150509250929050565b600081518084526020840193506020830160005b82811015611561578151865260209586019590910190600101611543565b5093949350505050565b6020815260006111ef602083018461152f565b60008060006060848603121561159357600080fd5b61159c84611173565b92506115aa60208501611173565b929592945050506040919091013590565b80151581146111cf57600080fd5b600080604083850312156115dc57600080fd5b6115e583611173565b915060208301356115f5816115bb565b809150509250929050565b60006020828403121561161257600080fd5b6111ef82611173565b6000806040838503121561162e57600080fd5b61163783611173565b915061164560208401611173565b90509250929050565b600080600080600060a0868803121561166657600080fd5b61166f86611173565b945061167d60208701611173565b93506040860135925060608601359150608086013567ffffffffffffffff81111561144d57600080fd5b600181811c908216806116bb57607f821691505b6020821081036116db57634e487b7160e01b600052602260045260246000fd5b50919050565b634e487b7160e01b600052603260045260246000fd5b60006020828403121561170957600080fd5b5051919050565b60006020828403121561172257600080fd5b81516111ef816115bb565b8082018082111561029f57634e487b7160e01b600052601160045260246000fd5b604081526000611761604083018561152f565b8281036020840152611773818561152f565b95945050505050565b6001600160a01b03861681526001600160a01b038516602082015283604082015282606082015260a0608082015260006117b960a083018461120f565b979650505050505050565b6000602082840312156117d657600080fd5b81516111ef816111b9565b6001600160a01b03861681526001600160a01b038516602082015260a06040820152600061181260a083018661152f565b8281036060840152611824818661152f565b90508281036080840152611838818561120f565b9897505050505050505056fea264697066735822122089d20c5acce768057ed4008e037a59d1857e5ed5fa0cf69425e10709948c67c764736f6c634300081b0033",m0="0x608060405234801561001057600080fd5b50600436106100de5760003560e01c8063a22cb4651161008c578063cb07bc2411610066578063cb07bc24146101fb578063cbd20a911461020e578063e985e9c51461022e578063f242432a1461026a57600080fd5b8063a22cb46514610194578063b4a0bdf3146101a7578063b5ed82ab146101d257600080fd5b80632eb2c2d6116100bd5780632eb2c2d61461014c5780634e1273f414610161578063708625621461018157600080fd5b8062fdd58e146100e357806301ffc9a7146101095780630e89341c1461012c575b600080fd5b6100f66100f136600461118f565b61027d565b6040519081526020015b60405180910390f35b61011c6101173660046111d2565b6102a5565b6040519015158152602001610100565b61013f61013a3660046111f6565b610340565b6040516101009190611255565b61015f61015a3660046113b0565b6103d4565b005b61017461016f366004611466565b61045f565b604051610100919061156b565b61015f61018f36600461157e565b61052c565b61015f6101a23660046115c9565b6107eb565b6003546101ba906001600160a01b031681565b6040516001600160a01b039091168152602001610100565b6100f66101e0366004611600565b6001600160a01b031660009081526004602052604090205490565b6100f661020936600461118f565b6107fa565b6100f661021c366004611600565b60046020526000908152604090205481565b61011c61023c36600461161b565b6001600160a01b03918216600090815260016020908152604080832093909416825291909152205460ff1690565b61015f61027836600461164e565b610a6a565b6000818152602081815260408083206001600160a01b03861684529091529020545b92915050565b60006001600160e01b031982167fd9b67a2600000000000000000000000000000000000000000000000000000000148061030857506001600160e01b031982167f0e89341c00000000000000000000000000000000000000000000000000000000145b8061029f57507f01ffc9a7000000000000000000000000000000000000000000000000000000006001600160e01b031983161461029f565b60606002805461034f906116a7565b80601f016020809104026020016040519081016040528092919081815260200182805461037b906116a7565b80156103c85780601f1061039d576101008083540402835291602001916103c8565b820191906000526020600020905b8154815290600101906020018083116103ab57829003601f168201915b50505050509050919050565b336001600160a01b038616811480159061041457506001600160a01b0380871660009081526001602090815260408083209385168352929052205460ff16155b1561044a5760405163711bec9160e11b81526001600160a01b038083166004830152871660248201526044015b60405180910390fd5b6104578686868686610ae8565b505050505050565b606081518351146104905781518351604051635b05999160e01b815260048101929092526024820152604401610441565b6000835167ffffffffffffffff8111156104ac576104ac611268565b6040519080825280602002602001820160405280156104d5578160200160208202803683370190505b50905060005b8451811015610524576020808202860101516104ff9060208084028701015161027d565b828281518110610511576105116116e1565b60209081029190910101526001016104db565b509392505050565b600360009054906101000a90046001600160a01b03166001600160a01b031663f0bd87cc6040518163ffffffff1660e01b8152600401602060405180830381865afa15801561057f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105a391906116f7565b60035460405163827ebb3760e01b8152600481018390523360248201526001600160a01b039091169063827ebb3790604401602060405180830381865afa1580156105f2573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106169190611710565b6106625760405162461bcd60e51b815260206004820152601d60248201527f4163636573732064656e6965643a20496e636f727265637420726f6c650000006044820152606401610441565b6001600160a01b0384166106b85760405162461bcd60e51b815260206004820152601460248201527f496e76616c6964207573657220616464726573730000000000000000000000006044820152606401610441565b6001600160a01b03831661070e5760405162461bcd60e51b815260206004820152601460248201527f496e76616c696420706f6c6c20616464726573730000000000000000000000006044820152606401610441565b6000821161076d5760405162461bcd60e51b815260206004820152602660248201527f546f6b656e20616d6f756e74206d7573742062652067726561746572207468616044820152656e207a65726f60d01b6064820152608401610441565b6000836001600160a01b031690506107978486838660405180602001604052806000815250610b4f565b846001600160a01b0316846001600160a01b03167f3c814279fb91e60473ba2885e11916204b1d6e338708a2c22cca659f28a92896856040516107dc91815260200190565b60405180910390a35050505050565b6107f6338383610bdd565b5050565b600354604080517ff0bd87cc00000000000000000000000000000000000000000000000000000000815290516000926001600160a01b03169163f0bd87cc9160048083019260209291908290030181865afa15801561085d573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061088191906116f7565b60035460405163827ebb3760e01b8152600481018390523360248201526001600160a01b039091169063827ebb3790604401602060405180830381865afa1580156108d0573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108f49190611710565b6109405760405162461bcd60e51b815260206004820152601d60248201527f4163636573732064656e6965643a20496e636f727265637420726f6c650000006044820152606401610441565b6001600160a01b0384166109965760405162461bcd60e51b815260206004820152601460248201527f496e76616c696420706f6c6c20616464726573730000000000000000000000006044820152606401610441565b600083116109f55760405162461bcd60e51b815260206004820152602660248201527f546f74616c20737570706c79206d7573742062652067726561746572207468616044820152656e207a65726f60d01b6064820152608401610441565b6000846001600160a01b03169050610a1e85828660405180602001604052806000815250610c8d565b60408051828152602081018690526001600160a01b038716917f2e8ac5177a616f2aec08c3048f5021e4e9743ece034e8d83ba5caf76688bb475910160405180910390a2949350505050565b336001600160a01b0386168114801590610aaa57506001600160a01b0380871660009081526001602090815260408083209385168352929052205460ff16155b15610adb5760405163711bec9160e11b81526001600160a01b03808316600483015287166024820152604401610441565b6104578686868686610b4f565b6001600160a01b038416610b1257604051632bfa23e760e11b815260006004820152602401610441565b6001600160a01b038516610b3b57604051626a0d4560e21b815260006004820152602401610441565b610b488585858585610ce6565b5050505050565b6001600160a01b038416610b7957604051632bfa23e760e11b815260006004820152602401610441565b6001600160a01b038516610ba257604051626a0d4560e21b815260006004820152602401610441565b60408051600180825260208201869052818301908152606082018590526080820190925290610bd48787848487610ce6565b50505050505050565b6001600160a01b038216610c20576040517fced3e10000000000000000000000000000000000000000000000000000000000815260006004820152602401610441565b6001600160a01b03838116600081815260016020908152604080832094871680845294825291829020805460ff191686151590811790915591519182527f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31910160405180910390a3505050565b6001600160a01b038416610cb757604051632bfa23e760e11b815260006004820152602401610441565b604080516001808252602082018690528183019081526060820185905260808201909252906104576000878484875b610cf285858585610d39565b6001600160a01b03841615610b485782513390600103610d2b5760208481015190840151610d24838989858589610f66565b5050610457565b61045781878787878761108a565b8051825114610d685781518151604051635b05999160e01b815260048101929092526024820152604401610441565b3360005b8351811015610e87576020818102858101820151908501909101516001600160a01b03881615610e38576000828152602081815260408083206001600160a01b038c16845290915290205481811015610e11576040517f03dee4c50000000000000000000000000000000000000000000000000000000081526001600160a01b038a166004820152602481018290526044810183905260648101849052608401610441565b6000838152602081815260408083206001600160a01b038d16845290915290209082900390555b6001600160a01b03871615610e7d576000828152602081815260408083206001600160a01b038b16845290915281208054839290610e7790849061172d565b90915550505b5050600101610d6c565b508251600103610f085760208301516000906020840151909150856001600160a01b0316876001600160a01b0316846001600160a01b03167fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f628585604051610ef9929190918252602082015260400190565b60405180910390a45050610b48565b836001600160a01b0316856001600160a01b0316826001600160a01b03167f4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb8686604051610f5792919061174e565b60405180910390a45050505050565b6001600160a01b0384163b156104575760405163f23a6e6160e01b81526001600160a01b0385169063f23a6e6190610faa908990899088908890889060040161177c565b6020604051808303816000875af1925050508015610fe5575060408051601f3d908101601f19168201909252610fe2918101906117c4565b60015b61104e573d808015611013576040519150601f19603f3d011682016040523d82523d6000602084013e611018565b606091505b50805160000361104657604051632bfa23e760e11b81526001600160a01b0386166004820152602401610441565b805181602001fd5b6001600160e01b0319811663f23a6e6160e01b14610bd457604051632bfa23e760e11b81526001600160a01b0386166004820152602401610441565b6001600160a01b0384163b156104575760405163bc197c8160e01b81526001600160a01b0385169063bc197c81906110ce90899089908890889088906004016117e1565b6020604051808303816000875af1925050508015611109575060408051601f3d908101601f19168201909252611106918101906117c4565b60015b611137573d808015611013576040519150601f19603f3d011682016040523d82523d6000602084013e611018565b6001600160e01b0319811663bc197c8160e01b14610bd457604051632bfa23e760e11b81526001600160a01b0386166004820152602401610441565b80356001600160a01b038116811461118a57600080fd5b919050565b600080604083850312156111a257600080fd5b6111ab83611173565b946020939093013593505050565b6001600160e01b0319811681146111cf57600080fd5b50565b6000602082840312156111e457600080fd5b81356111ef816111b9565b9392505050565b60006020828403121561120857600080fd5b5035919050565b6000815180845260005b8181101561123557602081850181015186830182015201611219565b506000602082860101526020601f19601f83011685010191505092915050565b6020815260006111ef602083018461120f565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f1916810167ffffffffffffffff811182821017156112a7576112a7611268565b604052919050565b600067ffffffffffffffff8211156112c9576112c9611268565b5060051b60200190565b600082601f8301126112e457600080fd5b81356112f76112f2826112af565b61127e565b8082825260208201915060208360051b86010192508583111561131957600080fd5b602085015b8381101561133657803583526020928301920161131e565b5095945050505050565b600082601f83011261135157600080fd5b813567ffffffffffffffff81111561136b5761136b611268565b61137e601f8201601f191660200161127e565b81815284602083860101111561139357600080fd5b816020850160208301376000918101602001919091529392505050565b600080600080600060a086880312156113c857600080fd5b6113d186611173565b94506113df60208701611173565b9350604086013567ffffffffffffffff8111156113fb57600080fd5b611407888289016112d3565b935050606086013567ffffffffffffffff81111561142457600080fd5b611430888289016112d3565b925050608086013567ffffffffffffffff81111561144d57600080fd5b61145988828901611340565b9150509295509295909350565b6000806040838503121561147957600080fd5b823567ffffffffffffffff81111561149057600080fd5b8301601f810185136114a157600080fd5b80356114af6112f2826112af565b8082825260208201915060208360051b8501019250878311156114d157600080fd5b6020840193505b828410156114fa576114e984611173565b8252602093840193909101906114d8565b9450505050602083013567ffffffffffffffff81111561151957600080fd5b611525858286016112d3565b9150509250929050565b600081518084526020840193506020830160005b82811015611561578151865260209586019590910190600101611543565b5093949350505050565b6020815260006111ef602083018461152f565b60008060006060848603121561159357600080fd5b61159c84611173565b92506115aa60208501611173565b929592945050506040919091013590565b80151581146111cf57600080fd5b600080604083850312156115dc57600080fd5b6115e583611173565b915060208301356115f5816115bb565b809150509250929050565b60006020828403121561161257600080fd5b6111ef82611173565b6000806040838503121561162e57600080fd5b61163783611173565b915061164560208401611173565b90509250929050565b600080600080600060a0868803121561166657600080fd5b61166f86611173565b945061167d60208701611173565b93506040860135925060608601359150608086013567ffffffffffffffff81111561144d57600080fd5b600181811c908216806116bb57607f821691505b6020821081036116db57634e487b7160e01b600052602260045260246000fd5b50919050565b634e487b7160e01b600052603260045260246000fd5b60006020828403121561170957600080fd5b5051919050565b60006020828403121561172257600080fd5b81516111ef816115bb565b8082018082111561029f57634e487b7160e01b600052601160045260246000fd5b604081526000611761604083018561152f565b8281036020840152611773818561152f565b95945050505050565b6001600160a01b03861681526001600160a01b038516602082015283604082015282606082015260a0608082015260006117b960a083018461120f565b979650505050505050565b6000602082840312156117d657600080fd5b81516111ef816111b9565b6001600160a01b03861681526001600160a01b038516602082015260a06040820152600061181260a083018661152f565b8281036060840152611824818661152f565b90508281036080840152611838818561120f565b9897505050505050505056fea264697066735822122089d20c5acce768057ed4008e037a59d1857e5ed5fa0cf69425e10709948c67c764736f6c634300081b0033",v0={},T0={},g0={_format:r0,contractName:l0,sourceName:u0,abi:p0,bytecode:y0,deployedBytecode:m0,linkReferences:v0,deployedLinkReferences:T0},k0={class:"poll-container"},A0={key:0,class:"loading"},h0={key:1,class:"poll-data"},_0={class:"poll-header"},N0={class:"poll-info"},w0={key:0,class:"subscription-section"},C0={key:0,class:"error-message"},x0={key:1,class:"eligibility-message"},F0={key:2},E0=["disabled"],M0={key:1,class:"poll-options"},I0=["onClick","disabled"],R0={class:"option-title"},S0={class:"vote-count"},D0=["onClick","disabled"],P0={key:2,class:"vote-button-container"},B0=["disabled"],V0={__name:"index",setup(O0){const l=i0.abi,h=g0.abi,_=o0.abi,N="0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512",w="0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9",I=f(""),R=f(""),S=f(!1),D=f(""),P=f(""),B=f(""),V=f(""),O=f([]),u=f([]),L=f([]),C=f(0),m=f(0),x=f(!1),F=f(!1),E=f(!1),k=f(!1),A=f(!1),p=f(""),t=b0().params.pollId,{address:d,isConnected:$}=f0(),J=async()=>{try{x.value=!0;const e={},[a,v,n,T,Z,e0]=await Promise.all([r(o,{address:t,abi:l,functionName:"pollTitle"}),r(o,{address:t,abi:l,functionName:"endDate"}),r(o,{address:t,abi:l,functionName:"isFinalized"}),r(o,{address:t,abi:l,functionName:"creator"}),r(o,{address:t,abi:l,functionName:"getEligibility"}),r(o,{address:t,abi:l,functionName:"getTotalOptions"})]);e.title=a||"Unknown",e.endDate=v?new Date(Number(v.toString())*1e3).toLocaleString():"N/A",e.isFinalized=n,e.creator=T||"Unknown",[e.minAge,e.location,e.minTokensRequired]=Z.map(y=>y.toString());const Y=Number(e0.toString()),M=[],j=[];for(let y=0;y<Y;y++){const g=await r(o,{address:t,abi:l,functionName:"votingOptions",args:[y]});j.push(g[0]),M.push(Number(g[1].toString()))}e.options=M.map((y,g)=>({description:j[g]||`Option ${g+1}`,totalVotes:y})),L.value=M,u.value=Array(Y).fill(0),G(e)}catch(e){console.error("Error fetching poll data:",e)}finally{x.value=!1}},Q=async()=>{try{const[e,a]=await Promise.all([r(o,{address:w,abi:_,functionName:"isUserSubscribedToPoll",args:[t,d.value],account:d.value}),r(o,{address:w,abi:_,functionName:"checkEligibility",args:[t,d.value],account:d.value})]);k.value=e,E.value=!e,A.value=a,p.value=""}catch(e){p.value="Failed to check subscription status. Please try again later.",console.error("Error checking subscription status:",e)}},W=async()=>{if(!A.value){p.value="You are not eligible to subscribe to this poll.";return}try{await c0(o,{address:w,abi:_,functionName:"subscribeUser",args:[t,d.value],account:d.value}),k.value=!0,E.value=!1,p.value="",U()}catch(e){p.value="Failed to subscribe to the poll. Please try again.",console.error("Error subscribing to poll:",e)}},U=()=>{const e=BigInt(t);r(o,{address:N,abi:h,functionName:"balanceOf",args:[d.value,e],account:d.value}).then(a=>{C.value=Number(a||0),m.value=C.value,F.value=m.value>0}).catch(a=>{console.error("Error fetching user tokens:",a)})},G=e=>{I.value=e.title||"Unknown",R.value=e.endDate||"N/A",S.value=e.isFinalized||!1,D.value=e.creator||"Unknown",P.value=e.minAge||"N/A",B.value=e.location||"N/A",V.value=e.minTokensRequired||"N/A",O.value=e.options||[],u.value=Array(e.options.length).fill(0)},z=(e,a)=>{u.value[e]+a>=0&&m.value-a>=0&&(u.value[e]+=a,m.value-=a,F.value=m.value>-1)},{writeContractAsync:H}=q({address:N,abi:h,functionName:"setApprovalForAll"}),{writeContractAsync:K}=q({address:t,abi:l,functionName:"castVotes"}),X=async()=>{try{if(!d.value)throw new Error("No connected wallet. Please connect your wallet.");await H({address:N,abi:h,functionName:"setApprovalForAll",args:[t,!0],account:d.value});const e=u.value.map((n,T)=>n>0?T:null).filter(n=>n!==null).map(Number),a=u.value.filter(n=>n>0).map(Number),v=await K({address:t,abi:l,functionName:"castVotes",args:[e,a],account:d.value});alert("Votes cast successfully!"),window.location.reload()}catch(e){console.error("Error casting votes:",e),alert(e.message||"Failed to cast votes")}};return t0(()=>{t&&d.value&&$.value&&(J(),U(),Q())}),(e,a)=>(c(),s("div",k0,[x.value?(c(),s("div",A0,a[0]||(a[0]=[b("p",null,"Loading poll data...",-1)]))):(c(),s("div",h0,[b("div",_0,[b("h1",null,"Poll: "+i(I.value),1),b("div",N0,[b("p",null,"Poll is final at "+i(R.value||"N/A"),1),b("p",null,"Creator: "+i(D.value||"N/A"),1),b("p",null,"Minimum Age: "+i(P.value||"N/A"),1),b("p",null,"Location Restriction: "+i(B.value||"N/A"),1),b("p",null,"Tokens Per Voter: "+i(V.value||"N/A"),1),b("p",null,"Your Voting Tokens: "+i(C.value),1),b("p",null,"Is Finalized: "+i(S.value?"Yes":"No"),1)])]),k.value?(c(),s("div",M0,[a[2]||(a[2]=b("h2",null,"Voting Options:",-1)),(c(!0),s(n0,null,d0(O.value,(v,n)=>(c(),s("div",{key:n,class:"poll-option-row"},[b("button",{class:"vote-adjust",onClick:T=>z(n,-1),disabled:u.value[n]===0}," - ",8,I0),b("div",R0,i(v.description),1),b("div",S0,i(L.value[n]+u.value[n]),1),b("button",{class:"vote-adjust",onClick:T=>z(n,1),disabled:m.value===0}," + ",8,D0)]))),128))])):(c(),s("div",w0,[a[1]||(a[1]=b("h2",null,"Subscribe to Poll",-1)),p.value?(c(),s("p",C0,i(p.value),1)):A.value?(c(),s("p",F0,"You need NFTs for this poll to participate. Subscribe now!")):(c(),s("p",x0," You are not eligible to subscribe to this poll. Please check the eligibility criteria. ")),b("button",{onClick:W,class:"subscribe-button",disabled:!A.value||!E.value}," Subscribe ",8,E0)])),k.value?(c(),s("div",P0,[b("button",{onClick:X,class:"vote-button",disabled:!F.value}," VOTE ",8,B0)])):s0("",!0)]))]))}},Q0=a0(V0,[["__scopeId","data-v-9febed5d"]]);export{Q0 as default};
